import{u as g,aK as h,a as v,r as n,aw as c}from"./CQW9o_Bo.js";const p=()=>{var e;return(e=g().$supabase)==null?void 0:e.client};function y(){const e=p(),l=h();v();const o=n(""),u=n(""),r=n(""),a=n(""),t=n(null);return{user:l,userDetails:t,email:o,password:u,successMsg:r,errorMsg:a,signinUser:async()=>{try{const{error:s}=await e.auth.signInWithPassword({email:o.value,password:u.value});if(s)throw s;r.value="Connexion réussie.",a.value="",c("/mon-compte")}catch{r.value="",a.value="Erreur durant la connexion"}},signinWithProvider:async()=>{try{const{error:s}=await e.auth.signInWithOAuth({provider:"google"});if(s)throw s;r.value="Connexion réussie.",a.value=""}catch{r.value="",a.value="Erreur durant la connexion"}},signOut:async()=>{await e.auth.signOut(),c("/login"),t.value=null},fetchUserDetails:async()=>{const{data:s,error:i}=await e.auth.getUser();if(i){console.error("Error fetching user details:",i);return}t.value=s.user}}}export{y as u};
